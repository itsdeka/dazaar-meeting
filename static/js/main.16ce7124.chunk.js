(this["webpackJsonpdazaar-react-starter"]=this["webpackJsonpdazaar-react-starter"]||[]).push([[0],{249:function(e){e.exports=JSON.parse('[{"url":"stun:stun.l.google.com:19302"}]')},257:function(e,n,t){},263:function(e,n){},265:function(e,n){},286:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=286},287:function(e,n){},289:function(e,n){},353:function(e,n){},359:function(e,n){},361:function(e,n){},366:function(e,n){},368:function(e,n){},384:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=384},388:function(e,n){},390:function(e,n){},399:function(e,n){},401:function(e,n){},426:function(e,n){},428:function(e,n){},429:function(e,n){},434:function(e,n){},436:function(e,n){},455:function(e,n){},467:function(e,n){},470:function(e,n){},474:function(e,n){},482:function(e,n){},529:function(e,n){},531:function(e,n){},535:function(e,n){},537:function(e,n){},543:function(e,n){},545:function(e,n){},547:function(e,n,t){"use strict";t.r(n);var o=t(27),c=t.n(o),r=t(250),i=t.n(r),a=t(251),u=t(12),s=t.n(u),f=t(79),l=(t(257),t(19)),d=function(e){var n=e.url,t=c.a.createRef();return Object(o.useEffect)((function(){t.current&&(t.current.src=n)}),[n,t]),Object(l.jsx)("video",{ref:t,autoPlay:!0})},p=(t(259),t(67)),w=t(97),v=t(160)("./tmp"),g=t(385),m=(t(70).createHash("sha256").update("my-hyperswarm-topic").digest(),function(){var e=Object(o.useState)(null),n=Object(a.a)(e,2),c=n[0];n[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("button",{onClick:function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:1280,height:720}}).then((function(e){var n=document.querySelector("video");!function(e,n,o){var c={videoBitsPerSecond:3===e?8e5:2===e?5e5:2e5,audioBitsPerSecond:3===e?128e3:2===e?64e3:32e3,mimeType:"video/webm;codecs=vp8,opus"},r=p((function(e){return w(e)}),null,{sparse:!0}),i=v.sell(r,{validate:function(e,n){n(null)}}),a=g(i,(function(e){return console.log(e)}),{wsProxy:["wss://hyperswarm.mauve.moe"],webrtcBootstrap:["wss://geut-webrtc-signal-v3.herokuapp.com","wss://signal.dat-web.eu","wss://geut-webrtc-signal-v3.glitch.me"],simplePeer:{config:{iceServers:t(249)}}});setInterval((function(){var e=new MediaRecorder(n,c);e.ondataavailable=function(){var e=Object(f.a)(s.a.mark((function e(n){var t,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.data.arrayBuffer();case 2:t=e.sent,o=new Uint8Array(t),r.append(o),console.log(r.length),console.log((new Date).toISOString());case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e.start(),setTimeout((function(n){e.stop()}),1e3)}),[1e3]),a.on("connection",(function(e,n){console.log("new connection!",n)})),i.ready((function(e){console.log(i.key.toString("hex"))}))}(3,e),n.srcObject=e,n.onloadedmetadata=function(e){n.play()}})).catch((function(e){console.log(e.name+": "+e.message)}))},children:"Stream"}),Object(l.jsx)("button",{onClick:function(){var e=v.buy(window.prompt("hey"),{sparse:!0});g(e,(function(e){return console.log(e)}),{wsProxy:["wss://hyperswarm.mauve.moe"],webrtcBootstrap:["wss://geut-webrtc-signal-v3.herokuapp.com","wss://signal.dat-web.eu","wss://geut-webrtc-signal-v3.glitch.me"],simplePeer:{config:{iceServers:t(249)}}}).on("connection",(function(e,n){console.log("new connection!",n),e.on("stream",(function(e){console.log(e)}))})),console.log(e),e.on("ready",(function(){console.log("ready")})),e.on("feed",Object(f.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.feed.update((function(){var n=e.feed.createReadStream({snapshot:!1,tail:!0,live:!0,batch:1,timeout:0,start:e.feed.length});console.log(n.index),n.on("data",(function(e){console.log(n);var t=document.querySelector("#replay"),o=new MediaSource;t.src=window.URL.createObjectURL(o),o.addEventListener("sourceopen",Object(f.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o.addSourceBuffer("video/webm;codecs=vp8,opus").appendBuffer(e),console.log((new Date).toISOString());case 3:case"end":return n.stop()}}),n)}))),!1)}))}));case 2:case"end":return n.stop()}}),n)})))),e.on("validate",(function(){console.log("remote validated us")}))},children:"Watch"}),Object(l.jsx)("video",{id:"video",style:{width:600,height:600},autoPlay:!0}),Object(l.jsx)("video",{id:"replay",style:{width:600,height:600},autoPlay:!0}),c&&Object(l.jsx)(d,{url:c})]})});i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(m,{})}),document.getElementById("root"))}},[[547,1,2]]]);
//# sourceMappingURL=main.16ce7124.chunk.js.map