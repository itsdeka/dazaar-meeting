(this["webpackJsonpdazaar-react-starter"]=this["webpackJsonpdazaar-react-starter"]||[]).push([[0],{242:function(n){n.exports=JSON.parse('[{"url":"stun:stun.l.google.com:19302"}]')},250:function(n,e,t){},272:function(n,e){function t(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=272},273:function(n,e){},275:function(n,e){},339:function(n,e){},345:function(n,e){},347:function(n,e){},353:function(n,e){},355:function(n,e){},371:function(n,e){function t(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=371},375:function(n,e){},377:function(n,e){},386:function(n,e){},388:function(n,e){},413:function(n,e){},415:function(n,e){},416:function(n,e){},421:function(n,e){},423:function(n,e){},442:function(n,e){},454:function(n,e){},457:function(n,e){},461:function(n,e){},469:function(n,e){},516:function(n,e){},518:function(n,e){},522:function(n,e){},524:function(n,e){},530:function(n,e){},532:function(n,e){},534:function(n,e,t){"use strict";t.r(e);var o=t(27),c=t.n(o),r=t(243),i=t.n(r),a=t(244),u=t(11),s=t.n(u),f=t(78),l=(t(250),t(19)),d=function(n){var e=n.url,t=c.a.createRef();return Object(o.useEffect)((function(){t.current&&(t.current.src=e)}),[e,t]),Object(l.jsx)("video",{ref:t,autoPlay:!0})},p=t(66),v=t(95),h=t(153)("./tmp"),w=t(372),g=(t(69).createHash("sha256").update("my-hyperswarm-topic").digest(),function(){var n=function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:1920,height:1080}}).then((function(n){var e=document.querySelector("video");!function(n,e,o){var c={videoBitsPerSecond:3===n?8e5:2===n?5e5:2e5,audioBitsPerSecond:3===n?128e3:2===n?64e3:32e3,mimeType:"video/webm;codecs=vp8,opus"},r=p((function(n){return v(n)}),null,{sparse:!0}),i=h.sell(r,{validate:function(n,e){e(null)}});i.on("ready",(function(){return i.on("peer-add",a)}));var a=function(n){},u=w(i,(function(n){return console.log(n)}),{wsProxy:["wss://hc.virale.io/proxy"],webrtcBootstrap:["wss://hc.virale.io/signal"],simplePeer:{config:{iceServers:t(242)}}});setInterval((function(){var n=new MediaRecorder(e,c);n.ondataavailable=function(){var n=Object(f.a)(s.a.mark((function n(e){var t,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.data.arrayBuffer();case 2:t=n.sent,o=new Uint8Array(t),r.append(o),console.log("Seller "+r.length),console.log("Seller "+(new Date).toISOString());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),n.start(),setTimeout((function(e){n.stop()}),1e3)}),[1e3]),u.on("connection",(function(n,e){console.log("new connection!",e)})),i.ready((function(n){console.log(i.key.toString("hex"))}))}(3,n),e.srcObject=n,e.onloadedmetadata=function(n){e.play()}})).catch((function(n){console.log(n.name+": "+n.message)}))},e=Object(o.useState)(null),c=Object(a.a)(e,2),r=c[0];c[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("button",{onClick:function(){return n()},children:"Stream"}),Object(l.jsx)("button",{onClick:function(){return function(n){n||(n=window.prompt("hey"));var e=h.buy(n,{sparse:!0});w(e,(function(n){return console.log(n)}),{wsProxy:["wss://hc.virale.io/proxy"],webrtcBootstrap:["wss://hc.virale.io/signal"],simplePeer:{config:{iceServers:t(242)}}}).on("connection",(function(n,e){console.log("new connection!",e),n.on("stream",(function(n){console.log(n)}))})),console.log(e),e.on("ready",(function(){console.log("ready")})),e.on("feed",Object(f.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.feed.update((function(){var n=e.feed.createReadStream({snapshot:!1,tail:!0,live:!0,batch:100});n.on("data",(function(e){var t=document.querySelector("#replay"),o=new MediaSource;t.src=window.URL.createObjectURL(o),o.addEventListener("sourceopen",Object(f.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.addSourceBuffer("video/webm;codecs=vp8,opus").appendBuffer(e),console.log("Buyer "+n.index),console.log("Buyer "+(new Date).toISOString());case 4:case"end":return t.stop()}}),t)}))),!1)}))}));case 2:case"end":return n.stop()}}),n)})))),e.on("validate",(function(){console.log("remote validated us")}))}(null)},children:"Watch"}),Object(l.jsx)("video",{id:"video",style:{width:600,height:600},muted:!0,autoPlay:!0}),Object(l.jsx)("video",{id:"replay",style:{width:600,height:600},autoPlay:!0}),r&&Object(l.jsx)(d,{url:r})]})});i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root"))}},[[534,1,2]]]);
//# sourceMappingURL=main.2486f748.chunk.js.map